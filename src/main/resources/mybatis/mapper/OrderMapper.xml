<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjtu.dao.OrderMapper">

    <resultMap id="BaseResultMap" type="com.bjtu.bean.Order">
        <id column="order_id" jdbcType="INTEGER" property="orderId"/>
        <result column="user_id" jdbcType="INTEGER" property="userId"/>
        <result column="creat_date" jdbcType="DATE" property="creatDate"/>
        <result column="total_price" jdbcType="DECIMAL" property="totalPrice"/>
    </resultMap>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        delete
        from user_order
        where order_id = #{orderId,jdbcType=INTEGER}
    </delete>

    <insert id="insert" parameterType="com.bjtu.bean.Order">
        insert into user_order (order_id, user_id, creat_date,
                                total_price)
        values (#{orderId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{creatDate,jdbcType=DATE},
                #{totalPrice,jdbcType=DECIMAL})
    </insert>

    <update id="updateByPrimaryKey" parameterType="com.bjtu.bean.Order">
        update user_order
        set user_id     = #{userId,jdbcType=INTEGER},
            creat_date  = #{creatDate,jdbcType=DATE},
            total_price = #{totalPrice,jdbcType=DECIMAL}
        where order_id = #{orderId,jdbcType=INTEGER}
    </update>

    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        select order_id, user_id, creat_date, total_price
        from user_order
        where order_id = #{orderId,jdbcType=INTEGER}
    </select>

    <select id="selectAll" resultMap="BaseResultMap">
        select order_id, user_id, creat_date, total_price
        from user_order
    </select>

    <select id="selectByUserIdAndCreateDate" parameterType="com.bjtu.bean.Order" resultType="int">
        select order_id
        from user_order
        where user_id = #{userId,jdbcType=INTEGER}
          and creat_date = #{creatDate,jdbcType=DATE};
    </select>
</mapper>